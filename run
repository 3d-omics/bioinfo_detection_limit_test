#!/usr/bin/env bash

set -euo pipefail

snakemake \
    --use-conda \
    --profile profile/default \
    --jobs 100 \
    --cores 24 \
    --keep-going \
    --latency-wait 60 \
    --cache \
        preprocess__index__ \
        quantify__index__ \
        preprocess__recompress__host__ \
        preprocess__recompress__mags__ \
    --groups \
        preprocess__fastp__="run_{sample_id}" \
        preprocess__fastp__import="run_{sample_id}" \
        preprocess__bowtie2="run_{sample_id}" \
        quantify__bowtie2__="run_{sample_id}" \
    "$@"
